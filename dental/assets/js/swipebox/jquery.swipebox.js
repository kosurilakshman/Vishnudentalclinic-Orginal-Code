!function(i,e,t,s){t.swipebox=function(s,o){var n={useCSS:!0,initialIndexOnArray:0,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterClose:null},a=this,r=[],d=(s=s).selector,l=t(d),c=void 0!==e.createTouch||"ontouchstart"in i||"onmsgesturechange"in i||navigator.msMaxTouchPoints,p=!!i.SVGSVGElement,u=i.innerWidth?i.innerWidth:t(i).width(),h=i.innerHeight?i.innerHeight:t(i).height();a.settings={},a.init=function(){a.settings=t.extend({},n,o),t.isArray(s)?(r=s,b.target=t(i),b.init(a.settings.initialIndexOnArray)):l.click(function(i){var e,s,o;r=[],o||(s="rel",o=t(this).attr(s)),$elem=o&&""!==o&&"nofollow"!==o?l.filter("["+s+'="'+o+'"]'):t(d),$elem.each(function(){var i=null,e=null;t(this).attr("title")&&(i=t(this).attr("title")),t(this).attr("href")&&(e=t(this).attr("href")),r.push({href:e,title:i})}),e=$elem.index(t(this)),i.preventDefault(),i.stopPropagation(),b.target=t(i.target),b.init(e)})},a.refresh=function(){t.isArray(s)||(b.destroy(),$elem=t(d),b.actions())};var b={init:function(i){a.settings.beforeOpen&&a.settings.beforeOpen(),this.target.trigger("swipebox-start"),t.swipebox.isOpen=!0,this.build(),this.openSlide(i),this.openMedia(i),this.preloadMedia(i+1),this.preloadMedia(i-1)},build:function(){if(t("body").append('<div id="swipebox-overlay">\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t<div id="swipebox-caption"></div>\t\t\t\t<div id="swipebox-action">\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t</div>\t\t</div>'),this.doCssTrans()&&(t("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),t("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),t("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),p){var i=t("#swipebox-action #swipebox-close").css("background-image");i=i.replace("webp","svg"),t("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":i})}t.each(r,function(){t("#swipebox-slider").append('<div class="slide"></div>')}),this.setDim(),this.actions(),this.keyboard(),this.gesture(),this.animBars(),this.resize()},setDim:function(){var e,s,o;"onorientationchange"in i?i.addEventListener("orientationchange",function(){0==i.orientation?(e=u,s=h):90!=i.orientation&&-90!=i.orientation||(e=h,s=u)},!1):(e=i.innerWidth?i.innerWidth:t(i).width(),s=i.innerHeight?i.innerHeight:t(i).height()),o={width:e,height:s},t("#swipebox-overlay").css(o)},resize:function(){var e=this;t(i).resize(function(){e.setDim()}).resize()},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t=0;t<i.length;t++)if(void 0!==e.createElement("div").style[i[t]])return i[t];return!1},doCssTrans:function(){if(a.settings.useCSS&&this.supportTransition())return!0},gesture:function(){if(c){var i=this,e=null,s={},o={},n=t("#swipebox-caption, #swipebox-action");n.addClass("visible-bars"),i.setTimeout(),t("body").bind("touchstart",function(i){return t(this).addClass("touching"),o=i.originalEvent.targetTouches[0],s.pageX=i.originalEvent.targetTouches[0].pageX,t(".touching").bind("touchmove",function(i){i.preventDefault(),i.stopPropagation(),o=i.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(a){a.preventDefault(),a.stopPropagation(),(e=o.pageX-s.pageX)>=10?i.getPrev():e<=-10?i.getNext():n.hasClass("visible-bars")?(i.clearTimeout(),i.hideBars()):(i.showBars(),i.setTimeout()),t(".touching").off("touchmove").removeClass("touching")})}},setTimeout:function(){if(a.settings.hideBarsDelay>0){var e=this;e.clearTimeout(),e.timeout=i.setTimeout(function(){e.hideBars()},a.settings.hideBarsDelay)}},clearTimeout:function(){i.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var i=t("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.addClass("visible-bars"):(t("#swipebox-caption").animate({top:0},500),t("#swipebox-action").animate({bottom:0},500),setTimeout(function(){i.addClass("visible-bars")},1e3))},hideBars:function(){var i=t("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.removeClass("visible-bars"):(t("#swipebox-caption").animate({top:"-50px"},500),t("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){i.removeClass("visible-bars")},1e3))},animBars:function(){var i=this,e=t("#swipebox-caption, #swipebox-action");e.addClass("visible-bars"),i.setTimeout(),t("#swipebox-slider").click(function(t){e.hasClass("visible-bars")||(i.showBars(),i.setTimeout())}),t("#swipebox-action").hover(function(){i.showBars(),e.addClass("force-visible-bars"),i.clearTimeout()},function(){e.removeClass("force-visible-bars"),i.setTimeout()})},keyboard:function(){var e=this;t(i).bind("keyup",function(i){i.preventDefault(),i.stopPropagation(),37==i.keyCode?e.getPrev():39==i.keyCode?e.getNext():27==i.keyCode&&e.closeSlide()})},actions:function(){var i=this;r.length<2?t("#swipebox-prev, #swipebox-next").hide():(t("#swipebox-prev").bind("click touchend",function(e){e.preventDefault(),e.stopPropagation(),i.getPrev(),i.setTimeout()}),t("#swipebox-next").bind("click touchend",function(e){e.preventDefault(),e.stopPropagation(),i.getNext(),i.setTimeout()})),t("#swipebox-close").bind("click touchend",function(e){i.closeSlide()})},setSlide:function(i,e){e=e||!1;var s=t("#swipebox-slider");this.doCssTrans()?s.css({left:100*-i+"%"}):s.animate({left:100*-i+"%"}),t("#swipebox-slider .slide").removeClass("current"),t("#swipebox-slider .slide").eq(i).addClass("current"),this.setTitle(i),e&&s.fadeIn(),t("#swipebox-prev, #swipebox-next").removeClass("disabled"),0==i?t("#swipebox-prev").addClass("disabled"):i==r.length-1&&t("#swipebox-next").addClass("disabled")},openSlide:function(e){t("html").addClass("swipebox"),t(i).trigger("resize"),this.setSlide(e,!0)},preloadMedia:function(i){var e=this,t=null;void 0!==r[i]&&(t=r[i].href),e.isVideo(t)?e.openMedia(i):setTimeout(function(){e.openMedia(i)},1e3)},openMedia:function(i){var e=null;if(void 0!==r[i]&&(e=r[i].href),i<0||i>=r.length)return!1;this.isVideo(e)?t("#swipebox-slider .slide").eq(i).html(this.getVideo(e)):this.loadMedia(e,function(){t("#swipebox-slider .slide").eq(i).html(this)})},setTitle:function(i,e){var s=null;t("#swipebox-caption").empty(),void 0!==r[i]&&(s=r[i].title),s&&t("#swipebox-caption").append(s)},isVideo:function(i){if(i&&(i.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||i.match(/vimeo\.com\/([0-9]*)/)))return!0},getVideo:function(i){var e="",t=i.match(/watch\?v=([a-zA-Z0-9\-_]+)/),s=i.match(/vimeo\.com\/([0-9]*)/);return t?e='<iframe width="560" height="315" src="//www.youtube.com/embed/'+t[1]+'" frameborder="0" allowfullscreen></iframe>':s&&(e='<iframe width="560" height="315"  src="http://player.vimeo.com/video/'+s[1]+"?byline=0&amp;portrait=0&amp;color="+a.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="swipebox-video-container" style="max-width:'+a.settings.videomaxWidth+'px"><div class="swipebox-video">'+e+"</div></div>"},loadMedia:function(i,e){if(!this.isVideo(i)){var s=t("<img>").on("load",function(){e.call(s)});s.attr("src",i)}},getNext:function(){index=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),index+1<r.length?(index++,this.setSlide(index),this.preloadMedia(index+1)):(t("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){t("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){index=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),index>0?(index--,this.setSlide(index),this.preloadMedia(index-1)):(t("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){t("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){t("html").removeClass("swipebox"),t(i).trigger("resize"),this.destroy()},destroy:function(){t(i).unbind("keyup"),t("body").unbind("touchstart"),t("body").unbind("touchmove"),t("body").unbind("touchend"),t("#swipebox-slider").unbind(),t("#swipebox-overlay").remove(),t.isArray(s)||s.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),t.swipebox.isOpen=!1,a.settings.afterClose&&a.settings.afterClose()}};a.init()},t.fn.swipebox=function(i){if(!t.data(this,"_swipebox")){var e=new t.swipebox(this,i);this.data("_swipebox",e)}return this.data("_swipebox")}}(window,document,jQuery);